import React, { useState, useEffect } from 'react';
import swasshLogo from '@/assets/swassh-logo.png';
import tireTrack from '@/assets/tire-track.png';
import carCleaning from '@/assets/car-cleaning.png';
import carVideoPlaceholder from '@/assets/car-video-placeholder.png';

const Index = () => {
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
  const [isMobileDropdownOpen, setIsMobileDropdownOpen] = useState(false);

  useEffect(() => {
    // Prevent body scroll when mobile menu is open
    if (isMobileMenuOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }

    // Cleanup function
    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isMobileMenuOpen]);

  const closeMobileMenu = () => {
    setIsMobileMenuOpen(false);
    setIsMobileDropdownOpen(false);
  };

  return (
    <div className="min-h-screen">
      {/* Video Background */}
      <div className="video-background">
        <video 
          autoPlay 
          muted 
          loop 
          playsInline
          onError={(e) => {
            const target = e.target as HTMLVideoElement;
            const parent = target.parentNode as HTMLElement;
            parent.style.backgroundImage = `url(${carVideoPlaceholder})`;
            parent.style.backgroundSize = 'cover';
            parent.style.backgroundPosition = 'center';
            target.style.display = 'none';
          }}
        >
          <source src="/car_image.mp4" type="video/mp4" />
          Your browser does not support the video tag. Please update your browser.
        </video>
      </div>

      {/* Navigation Bar */}
      <nav className="navbar">
        <div className="flex items-center">
          <img src={swasshLogo} alt="SWASSH Car Care Logo" className="navbar-logo" />
        </div>

        {/* Hamburger Icon for Mobile */}
        <button 
          className="menu-toggle"
          onClick={() => setIsMobileMenuOpen(true)}
        >
          <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>

        {/* Desktop Navigation Links */}
        <div className="navbar-links">
          <a href="#home" className="nav-button">HOME</a>
          <div className="dropdown">
            <a href="#packages" className="nav-button">
              PACKAGES
              <span className="ml-1">â–¼</span>
            </a>
            <div className="dropdown-content">
              <a href="#quick-shine">Quick Shine</a>
              <a href="#deep-cleaning">Deep Cleaning</a>
              <a href="#rubbing-polishing">Rubbing & Polishing</a>
              <a href="#windshield-polish">Windshield Polish</a>
            </div>
          </div>
          <a href="#contact" className="nav-button">CONTACT US</a>
        </div>

        {/* Mobile Menu Overlay */}
        {isMobileMenuOpen && (
          <div className="mobile-menu active">
            <button 
              className="close-menu"
              onClick={closeMobileMenu}
            >
              Ã—
            </button>
            <div className="flex flex-col gap-6 text-xl">
              <a href="#home" className="text-white font-bold" onClick={closeMobileMenu}>HOME</a>
              <div className="dropdown-mobile">
                <button 
                  className="text-white font-bold flex items-center"
                  onClick={() => setIsMobileDropdownOpen(!isMobileDropdownOpen)}
                >
                  PACKAGES <span className="ml-2">â–¼</span>
                </button>
                {isMobileDropdownOpen && (
                  <div className="dropdown-content-mobile mt-2 bg-gray-800 rounded-lg py-2">
                    <a href="#quick-shine" className="block px-4 py-2 text-gray-200 hover:bg-gray-700" onClick={closeMobileMenu}>Quick Shine</a>
                    <a href="#deep-cleaning" className="block px-4 py-2 text-gray-200 hover:bg-gray-700" onClick={closeMobileMenu}>Deep Cleaning</a>
                    <a href="#rubbing-polishing" className="block px-4 py-2 text-gray-200 hover:bg-gray-700" onClick={closeMobileMenu}>Rubbing & Polishing</a>
                    <a href="#windshield-polish" className="block px-4 py-2 text-gray-200 hover:bg-gray-700" onClick={closeMobileMenu}>Windshield Polish</a>
                  </div>
                )}
              </div>
              <a href="#contact" className="text-white font-bold" onClick={closeMobileMenu}>CONTACT US</a>
            </div>
          </div>
        )}
      </nav>

      {/* Hero Content */}
      <div className="content-overlay">
        <p className="animated-text text-green-400 hero-subtitle">
          // DOORSTEP CAR CLEANING SERVICES //
        </p>
        <h1 className="animated-text delay-1 hero-title">
          CAR CARE
        </h1>
      </div>

      {/* Packages Section */}
      <section id="packages" className="bg-car-light-gray py-16 relative z-2">
        <div className="packages-header">
          <img src={tireTrack} alt="Tire Track" className="tire-track" />
          <div className="relative z-10 flex flex-col md:flex-row justify-between items-center max-w-7xl mx-auto px-4">
            <div>
              <p className="text-sm font-semibold uppercase mb-1">OUR PACKAGES</p>
              <h2 className="text-white text-4xl md:text-5xl">Packages for Every Ride//</h2>
            </div>
            <a href="#book" className="bg-white text-car-red px-6 py-3 rounded-lg font-bold mt-4 md:mt-0 hover:bg-gray-100 transition-colors">BOOK NOW</a>
          </div>
        </div>

        <div className="packages-grid">
          {/* Quick Shine Package */}
          <div className="package-card">
            <div className="w-12 h-12 bg-car-red rounded-lg flex items-center justify-center mb-4">
              <span className="text-white font-bold text-lg">âœ¨</span>
            </div>
            <h3>QUICK SHINE</h3>
            <p>Keep your ride shining bright and rolling right with regular car cleaning!</p>
            <div className="time-price">
              Time :- Around 1hr<br />
              <span className="price">â‚¹349/-</span>
            </div>
            <div className="package-card-actions">
              <a href="#book" className="book-now-btn">BOOK NOW</a>
              <a href="#quick-shine" className="more-link">More</a>
            </div>
          </div>

          {/* Deep Cleaning Package */}
          <div className="package-card">
            <div className="w-12 h-12 bg-car-red rounded-lg flex items-center justify-center mb-4">
              <span className="text-white font-bold text-lg">ðŸ§½</span>
            </div>
            <h3>DEEP CLEANING</h3>
            <p>Revitalize your ride with a deep clean that'll make it shine like new!</p>
            <div className="time-price">
              Time :- Around 2-3hrs<br />
              <span className="price">â‚¹799/-</span>
            </div>
            <div className="package-card-actions">
              <a href="#book" className="book-now-btn">BOOK NOW</a>
              <a href="#deep-cleaning" className="more-link">More</a>
            </div>
          </div>

          {/* Rubbing & Polishing Package */}
          <div className="package-card">
            <div className="w-12 h-12 bg-car-red rounded-lg flex items-center justify-center mb-4">
              <span className="text-white font-bold text-lg">ðŸš—</span>
            </div>
            <h3>RUBBING & POLISHING</h3>
            <p>"Elevate your drive with detailing that brings out the best in every detail.</p>
            <div className="time-price">
              Time :- Around 2-3hrs<br />
              <span className="price">â‚¹1399/-</span>
            </div>
            <div className="package-card-actions">
              <a href="#book" className="book-now-btn">BOOK NOW</a>
              <a href="#rubbing-polishing" className="more-link">More</a>
            </div>
          </div>

          {/* Windshield Polish Package */}
          <div className="package-card">
            <div className="w-12 h-12 bg-car-red rounded-lg flex items-center justify-center mb-4">
              <span className="text-white font-bold text-lg">ðŸªŸ</span>
            </div>
            <h3>WINDSHIELD POLISH</h3>
            <p>Clear the way to perfection with glass polishing that turns foggy into fabulous!</p>
            <div className="time-price">
              Time :- Around 2hrs<br />
              <span className="price">â‚¹799/-</span>
            </div>
            <div className="package-card-actions">
              <a href="#book" className="book-now-btn">BOOK NOW</a>
              <a href="#windshield-polish" className="more-link">More</a>
            </div>
          </div>
        </div>
      </section>

      {/* Why Choose Us Section */}
      <section className="bg-white why-choose-section flex flex-col md:flex-row items-center gap-8 max-w-7xl mx-auto">
        <div className="w-full max-w-md">
          <img src={carCleaning} alt="Green Car Cleaning" className="w-full h-auto rounded-xl shadow-lg" />
        </div>
        <div className="flex-1 why-choose-content">
          <p className="text-sm font-semibold uppercase text-gray-600 mb-1">SWASSH</p>
          <h2 className="font-bold text-gray-800">WHY CHOOSE US//</h2>
          <p className="text-gray-600">SWASSH provides professional car cleaning services at your doorstep whenever you want, so you can spend your time doing the things you love.</p>

          <div className="progress-bar-container">
            <div className="progress-bar-label">
              <span>QUALITY SERVICES</span>
              <span>90%</span>
            </div>
            <div className="progress-bar">
              <div className="progress-fill" style={{ width: '90%' }}></div>
            </div>
          </div>

          <div className="progress-bar-container">
            <div className="progress-bar-label">
              <span>EXPERIENCED TECHNICIANS</span>
              <span>85%</span>
            </div>
            <div className="progress-bar">
              <div className="progress-fill" style={{ width: '85%' }}></div>
            </div>
          </div>

          <div className="progress-bar-container">
            <div className="progress-bar-label">
              <span>CUSTOMER SATISFACTION</span>
              <span>95%</span>
            </div>
            <div className="progress-bar">
              <div className="progress-fill" style={{ width: '95%' }}></div>
            </div>
          </div>
        </div>
      </section>

      {/* Testimonials Section */}
      <section className="testimonials-section">
        <div className="testimonials-header">
          <p className="text-sm uppercase text-gray-400 mb-2">TESTIMONIAL</p>
          <h2 className="font-bold">WHAT CLIENTS SAY //</h2>
        </div>
        <div className="testimonials-grid">
          {/* Testimonial Card 1 */}
          <div className="testimonial-card">
            <p>"If you want quality service for car detailing. Then Swassh is the one where they offer high-quality services, without stressing their budget at the same time."</p>
            <div className="testimonial-author">
              <div className="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                <span className="text-white font-bold">G</span>
              </div>
              <span className="font-bold">-Geeta Kumari</span>
            </div>
          </div>
          {/* Testimonial Card 2 */}
          <div className="testimonial-card">
            <p>"The overall appearance of the vehicle after cleaning is very good. The attitude and professionalism of the staff is good."</p>
            <div className="testimonial-author">
              <div className="w-12 h-12 bg-gray-600 rounded-full flex items-center justify-center">
                <span className="text-white font-bold">R</span>
              </div>
              <span className="font-bold">-Rahul Sherewala</span>
            </div>
          </div>
        </div>
      </section>

      {/* Extended Footer Section */}
      <section className="extended-footer-section">
        <div className="extended-footer-column">
          <h3>COMPANY //</h3>
          <p>Need a special car cleaning service? we are happy to fulfill every request in order to exceed your expectations</p>
          <div className="phone-contact">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6 text-car-green">
              <path fillRule="evenodd" d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.832 1.442l.636 2.017a.75.75 0 01-.092.836l-2.007 1.604a8.596 8.596 0 004.286 4.286l1.604-2.007a.75.75 0 01.836-.092l2.017.636c.856.222 1.442.972 1.442 1.832V19.5a3 3 0 01-3 3h-1.372c-.86 0-1.61-.586-1.832-1.442l-.636-2.017a.75.75 0 01.092-.836l2.007-1.604a8.596 8.596 0 00-4.286-4.286l-1.604 2.007a.75.75 0 01-.836.092L3.04 5.918A.75.75 0 011.5 4.5z" clipRule="evenodd" />
            </svg>
            <span className="font-bold">Talk To Our Support<br />9982210776</span>
          </div>
          <p className="mt-4">3 K Shivpure Kota (Raj.),</p>
          <p>near Saras Dairy Shivpura</p>
          <p>Pincode : 324010</p>
        </div>

        <div className="extended-footer-column">
          <h3>OUR SOLUTIONS //</h3>
          <ul className="list-none p-0 m-0">
            <li className="mb-3"><a href="#quick-shine" className="text-gray-300 hover:text-white transition-colors">Quick Shine</a></li>
            <li className="mb-3"><a href="#deep-cleaning" className="text-gray-300 hover:text-white transition-colors">Deep Cleaning</a></li>
            <li className="mb-3"><a href="#rubbing-polishing" className="text-gray-300 hover:text-white transition-colors">Rubbing & Polishing</a></li>
            <li className="mb-3"><a href="#windshield-polish" className="text-gray-300 hover:text-white transition-colors">Windshield Polish</a></li>
          </ul>
        </div>

        <div className="extended-footer-column">
          <h3>SUBSCRIBE NOW //</h3>
          <p>Subscribe to our newsletter and be the first to know about exclusive deals, new services, and car care tips.</p>
          <div className="subscribe-form">
            <input type="email" placeholder="Email Address" className="w-full" />
            <button type="submit" className="w-full">SEND</button>
          </div>
          <div className="social-icons">
            <a href="#" className="block">
              <div className="w-8 h-8 bg-car-red rounded-full flex items-center justify-center">
                <span className="text-white font-bold text-xs">IG</span>
              </div>
            </a>
            <a href="#" className="block">
              <div className="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                <span className="text-white font-bold text-xs">FB</span>
              </div>
            </a>
          </div>
        </div>
      </section>

      {/* Final Copyright Footer */}
      <footer className="copyright-footer">
        <p>Â© Copyright Swassh. All right reserved.</p>
        <div>
          <a href="#home">Home</a> / <a href="#book">Booking</a>
        </div>
      </footer>

      {/* Contact Us Floating Button */}
      <a href="#contact" className="contact-us-float">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className="w-6 h-6">
          <path d="M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z" />
          <path d="M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z" />
        </svg>
        Contact Us
      </a>
    </div>
  );
};

export default Index;
